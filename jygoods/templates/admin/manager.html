{% extends 'admin/base.html' %}
{% import "admin/_macros.html" as macros %}
{% block content %}
    <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">Admin</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a href="{{ url_for('admin.manager') }}">用户管理</a>
                </li>
            </ul>
        </div>
    </nav>

    {% for message in get_flashed_messages() %}
        <div class="alert alert-warning">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{ message }}
        </div>
    {% endfor %}

    <div>
        <table class="table table-hover table-condensed">
            <tbody>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></td>
            <td><span class="glyphicon glyphicon-briefcase" aria-hidden="true"></span></td>
            <td><span class="glyphicon glyphicon-off" aria-hidden="true"></span></td>
            <td><span class="glyphicon glyphicon-user" aria-hidden="true"></span></td>
            {% for user in users %}
                <tr>
                    <td><input type="checkbox" style="width: auto;"></td>
                    {% if current_user.id == user.id %}
                        <td>
                            <a href="#"></a>
                        </td>
                    {% else %}
                        <td>
                            <a href="{{ url_for('admin.delete_user', id=user.id, page=page) }}"><span
                                    class="glyphicon glyphicon-trash"
                                    aria-hidden="true"></span></a>
                        </td>
                    {% endif %}

                    <td>
                        <a href="{{ url_for('admin.edit_user', id=user.id, page=page) }}"><span
                                class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                    </td>
                    <td>{{ user.id }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.password_hash }}</td>
                    <td>{{ user.status }}</td>
                    <td>{{ user.role.name }}</td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
    </div>
    <div class="pagination">
        {{ macros.pagination_widget(pagination, 'admin.manager') }}
    </div>
{% endblock %}